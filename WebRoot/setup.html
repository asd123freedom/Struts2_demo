<!DOCTYPE html>
<html>
  <head>
   	<title>文件管理</title>
	<link rel="stylesheet" href="css/jquery.fileupload-ui.css">
	<link href="bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
	<script language="javascript" type="text/javascript" src="js/jquery-1.9.1.js"></script>
	<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
	<script src="jquery-upload/jquery.ui.widget.js"></script>
	<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
	<script src="jquery-upload/jquery.iframe-transport.js"></script>
	<!-- The basic File Upload plugin -->
	<script src="jquery-upload/jquery.fileupload.js"></script>
	<!-- The File Upload processing plugin -->
	<script src="jquery-upload/jquery.fileupload-process.js"></script>
	<!-- The File Upload image preview & resize plugin -->
	<script src="jquery-upload/jquery.fileupload-image.js"></script>
	<!-- The File Upload audio preview plugin -->
	<script src="jquery-upload/jquery.fileupload-audio.js"></script>
	<!-- The File Upload video preview plugin -->
	<script src="jquery-upload/jquery.fileupload-video.js"></script>
	<!-- The File Upload validation plugin -->
	<script src="jquery-upload/jquery.fileupload-validate.js"></script>
	<!-- The File Upload user interface plugin -->
	<script src="jquery-upload/jquery.fileupload-ui.js"></script>
	<script>
		$(function () {
			 $('#fileupload').fileupload({
       			 dataType: 'json',
       			 url:'uploadFile.action',
       			 formData:{"folderName":'test'},
        		 add: function (e, data) {
        		 	$('.btn.upload').text('Upload');
        		 	$('.btn.upload').removeClass("hide");
            	 	data.context = $('.btn.upload')
//                  		.appendTo(document.body)
                		.click(function () {
                 					data.context = $('<p/>').text('Uploading...').replaceAll($(this));
                 					data.submit();
                		});
        		},
       			done: function (e, data) {
            		data.context.text('Upload finished.');
        		},
        		drop: function (e, data) {
        			//$("li:not('.template')").remove();
        			console.log(data);
       				$.each(data.files, function (index, file) {
            		//alert('Dropped file: ' + file.name);
            			//if(file.name[length-1]!="/"){
            			if(file.relativePath.indexOf("WebRoot")>=0){
            				console.log(file.name);
            			}
            			var start=file.relativePath.indexOf("/");
            			var str=file.relativePath.substr(start);
            			//console.log(str);
            			$li=$("li.template").clone();
            			//$("ul").remove($("li not('.template')"));
            			//$li.text(file.name).appendTo($("ul.files")).removeClass("hide").removeClass("template");
        			});
    			},
    			progressall: function (e, data) {
        			var progress = parseInt(data.loaded / data.total * 100, 10);
        			$('.progress').show();
       				$('.progress .bar').css(
            			'width',
           				 progress + '%'
        			);
    			}
    		});
		});
	</script>
  </head>  
  <body>
  		<div class="navbar" style="margin-bottom:0px;">
		  <div class="navbar-inner" style="border-radius:0px;">
  			<div class="container" style="max-width:1000px">
		    	<a class="brand" href="#">DK</a>
		    	<a class="btn btn-info disabled" style="" href="#"><i class="icon-star icon-white"></i> Star</a>
			    <form class="navbar-form pull-right">
				  <input type="text" class="span2" placeholder="Email">
				  <input type="password" class="span2" placeholder="PassWord">
				  <button type="submit" class="btn">Submit</button>
				  
				</form>
				</div>
		  </div>
		</div>
    <span class="btn btn-success fileinput-button">
         <span>Add files...</span>
         <input type="file" name="grand" id="fileupload">
    </span>
	<!-- The main application script -->
	<!--script src="jquery-upload/main.js"></script-->
	<button class="hide btn btn-info upload" type="button">test</button>
	<div class="progress" style="display:none">
  		<div class="bar" style="width: 0%;"></div>
	</div>
	<div class="main" style="position:relative">
		<div class="menu" style="position:absolute;
		top:0px;left:0px;
		background-color:rgb(247, 247, 247);
		width:209px;
		height:690px;
		border:1px solid rgb(198, 200, 204);
		">
	  						<ul class="nav nav-list" style="margin-left:auto;margin-right:auto">
	  							<li><a href="#"><i class="icon-home"></i> 首页</a></li>
	  							<li><a href="#"><i class="icon-book"></i> Library</a></li>
	 							<li><a href="#"><i class="icon-pencil"></i> Applications</a></li>
	  							<li><a href="#"><i class="icon-th-large"></i> Misc</a></li>
							</ul>
						</div>
	<div class="section" style="margin-left:210px">
		<div class="header" style="
		background-color: #F2F6FF;
		border: 1px solid #d2d2d2;
		height:auto;
		">
				<input type="text" class="span4 input" style="margin-left:5px;margin-bottom: 10px;margin-top:10px"; />
					<button type="button" class="btn btn-warning"
						style="margin-bottom: 10px;margin-top:10px"">
						查找文件
					</button>
					<div class="dropdown typehead">
						<!-- Link or button to toggle dropdown -->
						<ul class="dropdown-menu">
							<li class="hide temple">
								<a tabindex="-1" href="#">Action</a>
							</li>
						</ul>
					</div>
				</div>
		<div class="position" style="border-bottom: 0px solid #d2d2d2;">
			<ul class="breadcrumb" style="margin-bottom:0px">
			  <li><a href="#"><i class="icon-folder-open"></i> struts2_demo</a> <span class="divider">/</span></li>
			  <li><a href="#">Library</a> <span class="divider">/</span></li>
			  <li class="active"><i class="icon-file"></i>Data</li>
			</ul>
		</div>
		<table class="table table-hover">
			<!--thead>
				<tr>
					<th style="width:60%">#</th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Username</th>
				</tr>
			</thead-->
			<tbody>
				<tr>
					<td>DK</td>
					<td>Mark</td>
					<td>Otto</td>
					<td>@mdo</td>
				</tr>
				<tr>
					<td>1</td>
					<td>Mark</td>
					<td>Otto</td>
					<td>@mdo</td>
				</tr>
				<tr>
					<td>1</td>
					<td>Mark</td>
					<td>Otto</td>
					<td>@mdo</td>
				</tr>
			</tbody>
		</table>
	</div>
	</div>
	</body>
</html>
